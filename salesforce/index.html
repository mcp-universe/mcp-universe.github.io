<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP-Universe for Salesforce - AI Agent Benchmarking Framework</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #87ceeb 0%, #ffffff 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.3em;
            margin-bottom: 20px;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .nav-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #0176d3, #005fb2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            border: none;
            font-size: 1em;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .nav-btn svg {
            width: 1.2em;
            height: 1.2em;
            vertical-align: middle;
            margin-right: 8px;
            fill: currentColor;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #0176d3;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #0176d3;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
        }

        .section p {
            color: #555;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        .component-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .component-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .component-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .component-card .icon {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }

        .component-card .expand-icon {
            font-size: 0.8em;
            transition: transform 0.3s ease;
            color: #666;
        }

        .component-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .component-card .card-summary {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 10px;
        }

        .component-card .card-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
        }

        .component-card.expanded .card-details {
            display: block;
        }

        .component-card .tools-list {
            background: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            color: #2c3e50;
        }

        .agent-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .agent-types-extended {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        .agent-card-full-width {
            grid-column: 1 / -1;
        }

        .agent-card {
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #28a745;
        }

        .agent-card h4 {
            color: #155724;
            margin-bottom: 10px;
            font-size: 1.3em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .agent-card .expand-icon {
            font-size: 0.8em;
            transition: transform 0.3s ease;
            color: #666;
        }

        .agent-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .agent-visualization {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #c3e6cb;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 500px;
            }
        }

        .visualization-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .visualization-container h5 {
            color: #155724;
            margin-bottom: 15px;
            font-size: 1.2em;
            text-align: center;
        }

        #react-transform-diagram {
            background: #fafafa;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #ddd;
        }

        .features-summary {
            background-color: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }

        .features-summary h6 {
            margin-top: 0;
            color: #856404;
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            padding: 8px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 5px;
            font-size: 0.9em;
        }

        .feature-icon {
            margin-right: 8px;
            font-size: 14px;
        }

        .evaluator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .evaluator-card {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #856404;
        }

        .evaluator-card h5 {
            color: #856404;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .demo-section {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 1px solid #90caf9;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #2196f3;
        }

        .demo-section h4 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .task-example {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .task-example h5 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .task-question {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-style: italic;
            margin: 10px 0;
            border-left: 3px solid #3498db;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .tag {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.85em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #0176d3, #005fb2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            margin: 15px 0;
            line-height: 1.4;
            white-space: pre;
        }

        .code-block .keyword {
            color: #3498db;
            font-weight: bold;
        }

        .code-block .string {
            color: #2ecc71;
        }

        .code-block .function {
            color: #e74c3c;
        }

        .code-block .comment {
            color: #95a5a6;
            font-style: italic;
        }

        .code-block .import {
            color: #f39c12;
        }

        /* Trajectory Comparison Styles */
        .controls-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .controls-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .controls-header h2 {
            color: #2c3e50;
            font-size: 1.8em;
            border: none;
            padding: 0;
        }

        .agent-selector {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .agent-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .agent-checkbox:hover {
            background: #e9ecef;
        }

        .agent-checkbox.selected {
            background: linear-gradient(135deg, #0176d3, #005fb2);
            color: white;
            border-color: #005fb2;
        }

        .agent-checkbox input[type="checkbox"] {
            display: none;
        }

        .trajectory-selector {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .trajectory-selector label {
            font-weight: 600;
            color: #2c3e50;
        }

        .trajectory-selector select {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            background: white;
            font-size: 1em;
        }

        .comparison-container {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .comparison-container.single {
            grid-template-columns: 1fr;
        }

        .comparison-container.double {
            grid-template-columns: 1fr 1fr;
        }

        .comparison-container.triple {
            grid-template-columns: 1fr 1fr 1fr;
        }

        .agent-column {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .agent-header {
            padding: 20px;
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            text-align: center;
        }

        .agent-header h3 {
            font-size: 1.4em;
            margin-bottom: 5px;
        }

        .agent-meta {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .trajectory-content {
            padding: 20px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .trajectory-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .trajectory-card:hover {
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
        }

        .trajectory-header {
            background: linear-gradient(135deg, #495057, #343a40);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trajectory-title {
            font-size: 1em;
            font-weight: 600;
        }

        .trajectory-meta-info {
            display: flex;
            gap: 10px;
            font-size: 0.85em;
            opacity: 0.9;
        }

        .expand-icon {
            font-size: 1.1em;
            transition: transform 0.3s ease;
        }

        .trajectory-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .trajectory-details {
            display: block;
            padding: 20px;
        }

        .trajectory-card.expanded .trajectory-details {
            display: block;
        }

        .question-section {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #2196f3;
        }

        .question-section h4 {
            color: #1976d2;
            margin-bottom: 8px;
            font-size: 1.1em;
        }


        .tool-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 8px;
            margin: 8px 0;
            font-size: 0.9em;
        }

        .tool-name {
            font-weight: bold;
            color: #856404;
        }

        .tool-result {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 10px;
            margin: 8px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .answer-section {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #28a745;
        }

        .answer-section h4 {
            color: #155724;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .answer-content {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-size: 0.85em;
        }

        /* New Flow Block Styles */
        .execution-flow {
            margin-top: 15px;
        }

        .reasoning-block {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            line-height: 1.6;
            font-size: 1em;
            color: #2c3e50;
        }

        .tool-call-box {
            margin-bottom: 20px;
            border: 2px solid #f39c12;
            border-radius: 8px;
            padding: 15px;
            background: #fefbf3;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tool-result-box {
            margin-bottom: 20px;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 15px;
            background: #f8fff8;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tool-name {
            font-weight: 600;
            color: #e67e22;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .tool-arguments {
            background: rgba(243, 156, 18, 0.1);
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            margin-top: 8px;
            border: 1px solid rgba(243, 156, 18, 0.3);
        }

        .tool-result-content {
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            white-space: pre-wrap;
            color: #2c3e50;
            line-height: 1.4;
        }

        /* Failure Reasons Section */
        .failure-reasons-section {
            background: #ffebee;
            border: 2px solid #f44336;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(244, 67, 54, 0.1);
        }

        .failure-reasons-section h4 {
            color: #c62828;
            margin: 0 0 10px 0;
            font-size: 1.1em;
            font-weight: 600;
        }

        .failure-reasons-list {
            margin: 0;
        }

        .failure-reason-item {
            background: white;
            border-left: 4px solid #f44336;
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 4px;
            font-size: 0.9em;
            line-height: 1.4;
            color: #d32f2f;
        }

        .failure-reason-item:last-child {
            margin-bottom: 0;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .no-selection {
            text-align: center;
            padding: 60px 20px;
            color: #666;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .no-selection h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(1, 118, 211, 0.1);
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #0176d3;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        @media (max-width: 1200px) {
            .comparison-container.triple {
                grid-template-columns: 1fr 1fr;
            }
            
            .architecture-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            header {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2em;
            }
            
            .nav-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 100%;
                max-width: 300px;
                text-align: center;
            }
            
            .comparison-container.double,
            .comparison-container.triple {
                grid-template-columns: 1fr;
            }
            
            .agent-selector {
                flex-direction: column;
            }
            
            .controls-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .architecture-grid {
                grid-template-columns: 1fr;
            }
            
            .agent-types {
                grid-template-columns: 1fr;
            }
            
            .agent-types-extended {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MCP-Universe for Salesforce</h1>
            <p class="subtitle">AI Agent Benchmarking Framework for Enterprise Operations</p>
            <p style="color: #666; font-size: 1.1em; margin-top: 15px;">
                A comprehensive framework for evaluating AI agents on complex Salesforce enterprise tasks using the Model Context Protocol (MCP)
            </p>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection('overview')">📋 Framework Overview</button>
                <button class="nav-btn" onclick="showSection('trajectories')">📊 Trajectory Comparisons</button>
                <a href="https://salesforce.quip.com/O6UcAhQBjkhj" class="nav-btn" target="_blank">📖 Tutorial Report</a>
                <a href="https://mcp-universe.github.io/" class="nav-btn" target="_blank"><svg width="1024" height="1024" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" transform="scale(64)" fill="currentColor"/></svg>Publically Released Version</a>
            </div>
        </header>

        <!-- Quick Access Trajectory Comparison -->
        <div class="trajectory-quick-access" style="background: linear-gradient(135deg, #0176d3, #005fb2); padding: 25px; margin: 20px; border-radius: 15px; color: white; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px;">
                <div>
                    <h3 style="margin: 0; font-size: 1.5em; color: white;">Agent Trajectory Comparison (by GPT-5)</h3>
                    <p style="margin: 8px 0 0 0; opacity: 0.9; font-size: 1.1em;">Compare how different AI agents solve complex Salesforce enterprise tasks</p>
                </div>
                <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <label for="quick-trajectory-select" style="font-weight: 600; white-space: nowrap;">Select Task:</label> 
                        <select id="quick-trajectory-select" style="padding: 8px 12px; border-radius: 8px; border: none; background: white; color: #333; min-width: 200px; font-size: 0.95em;">
                            <option value="1">Trajectory #1 - Find services and their dependency chains</option>
                            <option value="2">Trajectory #2 - Check disaster recovery runbooks and pipelines</option>
                            <option value="3">Trajectory #3 - Analyze splunk logs for trace ids</option>
                            <option value="4">Trajectory #4 - Get GUS product tags for services</option>
                            <option value="5">Trajectory #5 - Get gus investigation ids for services</option>
                            <option value="6">Trajectory #6 - Extract gus investigation data for services</option>
                            <option value="7">Trajectory #7 - Core database performance incident timestamps</option>
                        </select>
                    </div>
                    <button onclick="showSection('trajectories')" style="background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid white; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; white-space: nowrap;" onmouseover="this.style.background='white'; this.style.color='#0176d3'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.color='white'">
                        Compare Agents
                    </button>
                </div>
            </div>
        </div>

        <!-- Overview Section -->
        <div id="overview-section" class="page-section active">
            <div class="section">
                <h2>🎯 Overview</h2>
                <p>
                    The MCP-Universe architecture consists of several interconnected components specifically designed for 
                    Agent development, evaluation, and improvement:
                </p>
                <img src="./assets/mcp_universe_overview.png" alt="MCP-Universe Architecture" style="width: 100%; height: auto; border-radius: 10px; margin-bottom: 20px;">

                <div class="architecture-grid">
                    <div class="component-card">
                        <span class="icon">🤖</span>
                        <h4>AI Agents</h4>
                        <p>Three specialized agent types optimized for different reasoning approaches: ReAct (Standard), ReAct with Tool Summarization, and Cursor Agent.</p>
                    </div>
                    <div class="component-card">
                        <span class="icon">🔧</span>
                        <h4>MCP Servers</h4>
                        <p>Supports Salesforce MCP servers and tools such as Falcon Metadata, PagerDuty, GUS, Splunk, Argus, and Trace Analyzer for comprehensive system interaction.</p>
                    </div>
                    <div class="component-card">
                        <span class="icon">📋</span>
                        <h4>Task Definitions</h4>
                        <p>Complex, multi-step scenarios involving service dependency analysis, disaster recovery validation, incident management, and compliance checking.</p>
                    </div>
                    <div class="component-card">
                        <span class="icon">⚖️</span>
                        <h4>Specialized Evaluators</h4>
                        <p>Customized validation functions that assess mission-critical service identification, runbook compliance, and enterprise data accuracy.</p>
                    </div>
                    <div class="component-card">
                        <span class="icon">📊</span>
                        <h4>Benchmark Orchestrator</h4>
                        <p>Manages complex enterprise workflows, coordinates multi-server interactions, and collects detailed performance metrics across all scenarios.</p>
                    </div>
                    <div class="component-card">
                        <span class="icon">🔍</span>
                        <h4>Tracer</h4>
                        <p>Logging system capturing agent reasoning traces, API interactions, and decision-making processes for analysis.</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>🤖 Customizable Agent Designs</h2>
                <p>
                    MCP-Universe supports flexible agent framework designs and improvements, e.g.:
                </p>

                <!-- First row: Cursor Agent and ReAct Agent -->
                <div class="agent-types">
                    <div class="agent-card">
                        <h4>💻 Cursor Agent</h4>
                        <p>Advanced AI coding assistant that combines natural language understanding with direct system interaction. <span style="color: red;"><strong>Fully blackbox agent, cannot customized for specific tasks.</strong></span></p>
                    </div>
                    <div class="agent-card">
                        <h4>🔄 ReAct Agent</h4>
                        <p>Simple and effective agent that think before acting. It uses LLM calls for tool use and reasoning, with visible trajectories for debugging. <span style="color: darkgreen;"><strong>Controllable framework,</strong></span> <span style="color: red;"><strong>but cannot control context length from tool output.</strong></span></p>
                    </div>
                </div>

                <!-- Second row: ReAct + Tool Transform with extended visualization -->
                <div class="agent-types agent-types-extended">
                    <div class="agent-card agent-card-full-width" onclick="toggleAgentVisualization(this)">
                        <h4>🔧 ReAct + Tool Transform <span class="expand-icon">▼</span></h4>
                        <p>Enhanced ReAct agent that uses code writing to parse lengthy or problematic tool call results for more to-the-point tool feedback. <span style="color: darkgreen;"><strong>Controllable framework and clean tool output.</strong></span></p>
                        <div class="agent-visualization" style="display: none;">
                            <div class="visualization-container">
                                <h5>🎯 High-Level Processing Flow</h5>
                                <div id="react-transform-diagram"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>📝 Task demo: Salesforce Enterprise Operations</h2>
                <p>Here's an example of the complex, multi-step tasks that MCP-Universe evaluates:</p>
                
                <div class="demo-section">
                    <h4>Mission-Critical Service Analysis</h4>
                    <div class="task-question">
                        "For mission critical services related to 'sdb' check if they have a disaster recovery runbook 
                        (usually this would be inside their deployment runbook information) and if their utility pipelines 
                        are fit (Falcon Integration Test). Generate a comprehensive report in the given format."
                    </div>
                    <p style="margin-top: 15px; color: #666;">
                        This task requires the agent to: (1) List services with 'sdb' keyword, (2) Check mission-critical status, 
                        (3) Analyze disaster recovery runbooks, (4) Validate utility pipeline FIT compliance, and (5) Generate a structured report.
                    </p>
                </div>
            </div>

            <div class="section">
                <h2>⚖️ Evaluation Framework</h2>
                <p>
                    MCP-Universe employs a sophisticated evaluation system specifically designed for Salesforce enterprise scenarios:
                </p>

                <h3>🔧 Selected Salesforce MCP Tools</h3>
                <p>
                    The framework integrates with multiple enterprise-grade MCP servers to provide comprehensive evaluation capabilities:
                </p>
                
                <div class="architecture-grid">
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Salesforce Falcon Metadata
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Enterprise service management and metadata operations</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • list_services<br>
                                • get_service_definition<br>
                                • list_service_instances<br>
                                • get_fi_definition<br>
                                • get_fd_definition
                            </div>
                            <p>Comprehensive enterprise service management, Falcon Instance operations, functional domain queries, and metadata analysis for complex service architectures.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Salesforce PagerDuty
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Incident management and team operations</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • pagerduty_get_teams<br>
                                • pagerduty_get_oncall<br>
                                • pagerduty_get_incidents<br>
                                • pagerduty_get_services
                            </div>
                            <p>Complete incident management lifecycle including team operations, escalation policies, on-call scheduling, service monitoring, and alert management.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Salesforce Splunk
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Log analysis and monitoring</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • query_splunk
                            </div>
                            <p>Advanced log analysis capabilities including trace ID extraction, error pattern detection, performance monitoring, and complex query execution across enterprise log data.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Salesforce Argus
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Metrics and performance monitoring</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • query_argus<br>
                                • monitor_metric
                            </div>
                            <p>Comprehensive metrics querying, performance monitoring, real-time system health analysis, and automated alerting for enterprise-scale monitoring.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Salesforce GUS
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Issue tracking and investigation management</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • get_gus_investigations_by_product_tags<br>
                                • get_gus_incident_case_prb_by_time<br>
                                • get_specific_gus_workitem_by_name
                            </div>
                            <p>Enterprise issue tracking, investigation management, product tag operations, case management, and workitem analysis across complex enterprise systems.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Salesforce Trace Analyzer
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Distributed tracing and performance analysis</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • fetch_and_analyze_trace<br>
                                • curl_and_analyze
                            </div>
                            <p>Advanced distributed tracing analysis, SQL/SOQL query optimization, LLM call profiling, and comprehensive performance bottleneck identification.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            Timestamp Utilities
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Time format conversion and temporal operations</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • convert_timestamp<br>
                                • get_current_timestamp<br>
                                • get_relative_timestamp
                            </div>
                            <p>Comprehensive time format conversion, epoch handling, temporal query support, and timezone management for enterprise time-based operations.</p>
                        </div>
                    </div>
                    <div class="component-card" onclick="toggleMCPCard(this)">
                        <h4>
                            MCP Adaptor
                            <span class="expand-icon">▼</span>
                        </h4>
                        <p class="card-summary">Unified service operations and integration</p>
                        <div class="card-details">
                            <div class="tools-list">
                                <strong>Available Tools:</strong><br>
                                • get_activities<br>
                                • get_activities_by_id<br>
                                • get_service_definition<br>
                                • list_service_instances
                            </div>
                            <p>Unified service operations, activity tracking, cross-system integration, and centralized management of enterprise service interactions.</p>
                        </div>
                    </div>
                </div>

                <h3>🎯 Demo Evaluation Task Categories</h3>
                <div class="evaluator-grid">
                    <div class="evaluator-card">
                        <h5>Service Dependencies</h5>
                        <p>Analysis of complex service dependency chains, start dependencies, and authorized client relationships.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>Mission-Critical Services</h5>
                        <p>Identification and validation of mission-critical services, disaster recovery runbooks, and FIT compliance.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>Incident Analysis</h5>
                        <p>Splunk log analysis, trace ID extraction, error pattern detection, and performance query analysis.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>GUS Integration</h5>
                        <p>Product tag management, investigation tracking, and workitem analysis across enterprise systems.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>PagerDuty Operations</h5>
                        <p>Team management, incident tracking, escalation policy analysis, and connection pool monitoring.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>Enterprise Compliance</h5>
                        <p>Runbook validation, pipeline compliance checking, and enterprise policy adherence verification.</p>
                    </div>
                </div>

                <h3>📏 Flexible Evaluator Framework</h3>
                <p>
                    MCP-Universe uses a flexible, rule-based evaluation system that can be customized for any task. 
                    Evaluators are defined using a simple JSON structure that specifies how to extract values from 
                    agent responses and what criteria to validate against.
                </p>

                <div class="demo-section">
                    <h4>📝 Evaluator Example: Mission-Critical Service Validation</h4>
                    <p>Here's how an evaluator is defined for validating mission-critical services:</p>
                    
                    <div class="code-block">
{
  <span class="string">"func"</span>: <span class="string">"json -> get(mission_critical_services)"</span>,
  <span class="string">"op"</span>: <span class="string">"salesforce.has_mission_critical_services"</span>,
  <span class="string">"value"</span>: <span class="keyword">true</span>,
  <span class="string">"desc"</span>: <span class="string">"Check that response contains mission critical services related to 'sdb'"</span>
}
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <p><strong>How it works:</strong></p>
                        <ul style="margin: 10px 0; padding-left: 25px; color: #555;">
                            <li><strong>func:</strong> Extracts data using a pipeline (JSON decode → get field)</li>
                            <li><strong>op:</strong> Custom validation function for Salesforce-specific checks (has_mission_critical_services, see below)</li>
                            <li><strong>value:</strong> Expected result (true/false, numbers, strings, etc.)</li>
                            <li><strong>desc:</strong> Human-readable description of what's being validated</li>
                        </ul>
                    </div>

                    <p><strong>Custom op Implementation:</strong></p>
                    <div class="code-block">
<span class="keyword">def</span> <span class="function">has_mission_critical_services</span>(services_list, expected_value, **kwargs):
    <span class="string">"""
    Validates that the response contains mission-critical services.
    
    Args:
        services_list: List of service objects from agent response
        expected_value: Expected boolean result (True/False)
        **kwargs: Additional arguments like service_prefix
    
    Returns:
        bool: True if validation passes, False otherwise
    """</span>
    <span class="keyword">if not</span> services_list <span class="keyword">or not</span> <span class="function">isinstance</span>(services_list, <span class="function">list</span>):
        <span class="keyword">return</span> <span class="keyword">False</span>
    
    <span class="comment"># Check if any services are marked as mission critical</span>
    mission_critical_count = <span class="function">len</span>([
        service <span class="keyword">for</span> service <span class="keyword">in</span> services_list 
        <span class="keyword">if</span> service.<span class="function">get</span>(<span class="string">'service_name'</span>, <span class="string">''</span>).<span class="function">startswith</span>(
            kwargs.<span class="function">get</span>(<span class="string">'service_prefix'</span>, <span class="string">'sdb'</span>)
        )
    ])
    
    <span class="comment"># Validate against live service definitions</span>
    <span class="keyword">for</span> service <span class="keyword">in</span> services_list:
        service_name = service.<span class="function">get</span>(<span class="string">'service_name'</span>)
        <span class="keyword">if</span> service_name:
            live_definition = <span class="function">get_live_service_definition</span>(service_name)
            <span class="keyword">if not</span> live_definition.<span class="function">get</span>(<span class="string">'is_mission_critical'</span>):
                <span class="keyword">return</span> <span class="keyword">False</span>
    
    <span class="keyword">return</span> (mission_critical_count > <span class="function">0</span>) == expected_value
                    </div>
                </div>

                <h3>🔧 Built-in Evaluation Functions</h3>
                <div class="evaluator-grid">
                    <div class="evaluator-card">
                        <h5>JSON Operations</h5>
                        <p><code>json</code>, <code>get(key)</code>, <code>len</code> - Parse JSON responses and extract specific fields or calculate lengths.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>Comparison Operators</h5>
                        <p><code>=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>contains</code> - Standard comparison operations for validating extracted values.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>Salesforce Validators</h5>
                        <p><code>salesforce.has_mission_critical_services</code>, <code>salesforce.services_have_required_fields</code> - Domain-specific validation functions.</p>
                    </div>
                    <div class="evaluator-card">
                        <h5>Custom Functions</h5>
                        <p><code>foreach</code>, <code>filter</code>, <code>map</code> - Advanced operations for complex data structures and nested validations.</p>
                    </div>
                </div>

            </div>

            <div class="section">
                <h2>🚀 Getting Started</h2>
                <p>Ready to explore agent trajectories and compare different approaches on Salesforce enterprise tasks? Click the button above to access our interactive trajectory comparison tool.</p>

                <h3>💻 Running Your Own Benchmarks</h3>
                <div class="code-block">
<span class="import">from</span> mcpuniverse.benchmark.runner <span class="import">import</span> BenchmarkRunner
<span class="import">from</span> mcpuniverse.tracer.collectors <span class="import">import</span> MemoryCollector

<span class="keyword">async def</span> <span class="function">run_benchmark</span>():
    <span class="comment"># Initialize trace collector to capture execution details</span>
    trace_collector = <span class="function">MemoryCollector</span>()
    
    <span class="comment"># Create benchmark runner with Salesforce configuration</span>
    benchmark = <span class="function">BenchmarkRunner</span>(<span class="string">"test/salesforce.yaml"</span>)
    
    <span class="comment"># Execute benchmark and collect results</span>
    results = <span class="keyword">await</span> benchmark.<span class="function">run</span>(trace_collector=trace_collector)
    
    <span class="keyword">return</span> results
                </div>
            </div>
        </div>

        <!-- Trajectories Section -->
        <div id="trajectories-section" class="page-section">
            <div class="controls-section">
                <div class="controls-header">
                    <h2>🎛️ Agent Trajectory Comparison (by GPT-5)</h2>
                    <div class="trajectory-selector">
                        <label for="trajectory-select">Trajectory:</label>
                        <select id="trajectory-select">
                            <option value="1">Trajectory #1 - Find services and their dependency chains</option>
                            <option value="2">Trajectory #2 - Check disaster recovery runbooks and pipelines</option>
                            <option value="3">Trajectory #3 - Analyze splunk logs for trace ids</option>
                            <option value="4">Trajectory #4 - Get GUS product tags for services</option>
                            <option value="5">Trajectory #5 - Get gus investigation ids for services</option>
                            <option value="6">Trajectory #6 - Extract gus investigation data for services</option>
                            <option value="7">Trajectory #7 - Core database performance incident timestamps</option>
                        </select>
                    </div>
                </div>

                <div id="current-question" class="question-section" style="display: none; margin: 20px 0;">
                    <h4>🎯 Current Question</h4>
                    <p id="question-text"></p>
                </div>
                
                <div class="agent-selector">
                    <label class="agent-checkbox" id="cursor-agent-checkbox">
                        <input type="checkbox" value="cursor-agent">
                        <span>Cursor Agent</span>
                    </label>
                    <label class="agent-checkbox" id="react-no-transform-checkbox">
                        <input type="checkbox" value="react-no-transform">
                        <span>ReAct Agent</span>
                    </label>
                    <label class="agent-checkbox" id="react-transform-checkbox">
                        <input type="checkbox" value="react-transform">
                        <span>ReAct + Tool Transform</span>
                    </label>
                </div>
            </div>

            <div id="comparison-area">
                <div class="no-selection">
                    <h3>🎯 Select Agent Types to Compare</h3>
                    <p>Choose one or more agent types above to view and compare their trajectories for the selected Salesforce enterprise task.</p>
                    <p style="margin-top: 15px; color: #888;">
                        You can compare up to 3 different agent approaches side by side to analyze their reasoning patterns, 
                        tool usage, and performance differences on complex enterprise scenarios.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // MCP Card toggle functionality
        function toggleMCPCard(card) {
            card.classList.toggle('expanded');
        }

        // Page navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.add('active');
            
            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Initialize trajectories section if needed
            if (sectionName === 'trajectories' && !trajectoriesInitialized) {
                initializeTrajectories();
            }
        }

        // Trajectory comparison functionality
        let trajectoriesInitialized = false;
        const trajectoryData = {
            'react-transform': null,
            'react-no-transform': null,
            'cursor-agent': null
        };
        
        // Evaluation results for determining success/failure
        let evaluationResults = null;

        let selectedAgents = new Set();
        let selectedTrajectoryId = '1';

        function initializeTrajectories() {
            trajectoriesInitialized = true;
            loadTrajectoryData();
            setupEventListeners();
            // Show the question for the default selected trajectory
            updateQuestionDisplay();
            
            // Initialize quick trajectory selector
            initializeQuickTrajectorySelector();
        }

        function initializeQuickTrajectorySelector() {
            const quickSelect = document.getElementById('quick-trajectory-select');
            if (quickSelect) {
                quickSelect.addEventListener('change', function() {
                    // Switch to trajectories section
                    showSection('trajectories');
                    
                    // Update the main trajectory selector to match
                    setTimeout(() => {
                        const mainSelect = document.getElementById('trajectory-select');
                        if (mainSelect) {
                            mainSelect.value = this.value;
                            selectedTrajectoryId = this.value;
                            // Update question display and comparison
                            updateQuestionDisplay();
                            updateComparison();
                        }
                    }, 100);
                });
            }
        }

        function setupEventListeners() {
            // Agent selection checkboxes
            document.querySelectorAll('.agent-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const agentType = this.value;
                    const label = this.closest('.agent-checkbox');
                    
                    if (this.checked) {
                        selectedAgents.add(agentType);
                        label.classList.add('selected');
                    } else {
                        selectedAgents.delete(agentType);
                        label.classList.remove('selected');
                    }
                    
                    updateComparison();
                });
            });

            // Trajectory selection
            document.getElementById('trajectory-select').addEventListener('change', function() {
                selectedTrajectoryId = this.value;
                updateQuestionDisplay();
                updateComparison();
            });
        }

        async function loadTrajectoryData() {
            try {
                // Load evaluation results first
                try {
                    const evalResponse = await fetch('assets/evaluation_results_summary.json');
                    evaluationResults = await evalResponse.json();
                    console.log('✅ Evaluation results loaded');
                } catch (evalError) {
                    console.warn('Could not load evaluation results:', evalError);
                    evaluationResults = null;
                }
                
                // Load ReAct + Transform data (existing file)
                const response = await fetch('assets/gpt_5_trajectories_data.json');
                trajectoryData['react-transform'] = await response.json();
                
                // Load ReAct no transform data
                const response_no_transform = await fetch('assets/gpt_5_no_trans_traj_data.json')
                trajectoryData['react-no-transform'] = await response_no_transform.json();
                
                // Load actual Cursor trajectory data
                try {
                    const cursor_response = await fetch('assets/cursor_trajectories_data.json');
                    const cursorData = await cursor_response.json();
                    trajectoryData['cursor-agent'] = convertCursorDataFormat(cursorData);
                } catch (cursorError) {
                    console.warn('Could not load cursor trajectory data, using mock data:', cursorError);
                    trajectoryData['cursor-agent'] = createMockData('Cursor Agent', 'cursor-agent');
                }
                
            } catch (error) {
                console.error('Error loading trajectory data:', error);
            }
        }

        function convertCursorDataFormat(cursorData) {
            // Convert cursor trajectory format to match expected format
            const convertedData = {
                "metadata": {
                    "source_file": "cursor_trajectories_data.json",
                    "total_trajectories": cursorData.trajectories?.length || 0,
                    "extraction_timestamp": cursorData.metadata?.extraction_timestamp || new Date().toISOString()
                },
                "trajectories": []
            };

            if (cursorData.trajectories) {
                convertedData.trajectories = cursorData.trajectories.map(traj => ({
                    "trajectory_id": parseInt(traj.trajectory_id) || traj.trajectory_id,
                    "trace_id": traj.trace_id,
                    "question": traj.question,
                    "steps": traj.steps || [],
                    "answer": traj.answer,
                    "metadata": {
                        "title": traj.title,
                        "export_info": traj.export_info,
                        "total_steps": traj.steps?.length || 0,
                        "agent_type": "cursor-agent"
                    }
                }));
            }

            return convertedData;
        }

        function createMockData(agentName, agentType) {
            const baseData = {
                "metadata": {
                    "source_file": `${agentType}_benchmark.log`,
                    "total_trajectories": 7,
                    "extraction_timestamp": new Date().toISOString()
                },
                "trajectories": []
            };

            for (let i = 1; i <= 8; i++) {
                const trajectory = {
                    "trajectory_id": i,
                    "trace_id": generateMockTraceId(),
                    "question": getQuestionForTrajectory(i),
                    "steps": generateMockSteps(agentType, i),
                    "answer": generateMockAnswer(i)
                };
                baseData.trajectories.push(trajectory);
            }

            return baseData;
        }

        function generateMockTraceId() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        function getQuestionForTrajectory(id) {
            // Try to get the question from loaded cursor trajectory data first
            if (trajectoryData['cursor-agent'] && trajectoryData['cursor-agent'].trajectories) {
                const trajectory = trajectoryData['cursor-agent'].trajectories.find(t => t.trajectory_id == id);
                if (trajectory && trajectory.question) {
                    return trajectory.question;
                }
            }
            
            // Fallback to hardcoded questions if cursor data not available
            const questions = [
                "Get the list of all services that has keyword 'sdb'. From the details of these services and their dependencies, find the longest chains of 'start' dependencies, 'validate' dependencies and 'authorized' clients dependencies.",
                "For mission critical services related to 'sdb' check if they have a disaster recovery runbook (usually this would be inside their deployment runbook information) and if their utility pipelines are fit (Falcon Integration Test) (You can assume pipelines that are FIT will have that appropriately titled). Generate a comprehensive report in the given format",
                "Get the stats of the top 5 trace ids (from mdc.trace_id field of the splunk logs) from the splunk logs for services with names starting with 'bot-svc-llm' prefix, with index=globaldefault and check for any '504 Gateway Timeout' error pattern in those services from 10:00 to 10:05 yesterday (UTC time).\n- Then get the list of Top SQL, SOQL and LLM queries in terms of longest duration and the avg duration of the SQL, SOQL and LLM queries related to these splunk logs by analyzing their trace ids.",
                "Get the GUS product tags for all the mission critical services (whose names start with 'bot-svc-llm' prefix).",
                "For all the mission critical services (which names starting with 'bot-svc-llm' prefix), get their gus product tags  (from the gusProductTagId field in their service definition) and from that the list of gus investigations created for those services in the last 10 days. Finally output the list of gus investigation ids (ids usually in format 'W-<numbers>')",
                "For all the mission critical services which name 'bot-svc-llm', get their gus product tags (from the gusProductTagId field in their service definition) and from that the list of gus investigations created for those services in the last 10 days. From the GUS investigations extract the gus investigation ids (in format 'W-<numbers>') and the exact splunk queries that were used during the investigations. Generate your output as a list of splunk queries.",
                "First list the teams related to Core Database Performance. Then find the start time (in epoch_seconds) format of the Connection Pool (or often abbreviated in different forms) related incidents handled by those teams in the last 60 days."
            ];
            return questions[id - 1] || questions[0];
        }

        function generateMockSteps(agentType, trajectoryId) {
            const stepCount = Math.floor(Math.random() * 15) + 8;
            const steps = [];
            
            for (let i = 1; i <= stepCount; i++) {
                const toolName = generateMockToolName(i);
                const step = {
                    "step_number": i,
                    "llm_response": generateMockLLMResponse(agentType, i),
                    "tool_name": toolName,
                    "server_name": generateMockServerName(toolName),
                    "action_input": generateMockActionInput(toolName, i),
                    "tool_result": generateMockToolResult(agentType, i),
                    "tool_call": generateMockToolCall(i)
                };
                steps.push(step);
            }
            
            return steps;
        }

        function generateMockLLMResponse(agentType, stepNumber) {
            const responses = {
                'react-no-transform': [
                    "I need to start by listing all services that contain the keyword 'sdb' to understand the scope of services I'm working with.",
                    "Now I have the list of services. I need to get detailed information about each service to analyze their dependencies.",
                    "I'll continue gathering service definitions to build a complete picture of the dependency chains.",
                    "Based on the service definitions I've collected, I need to analyze the dependency relationships."
                ],
                'cursor-agent': [
                    "Let me analyze the codebase to understand the service architecture and identify services with 'sdb' keyword.",
                    "I'll examine the service configuration files to extract dependency information systematically.",
                    "Now I need to trace through the dependency chains to find the longest paths.",
                    "I'll compile the results into a structured format for easy analysis."
                ]
            };
            
            const agentResponses = responses[agentType] || responses['react-no-transform'];
            return agentResponses[stepNumber % agentResponses.length] || "Continuing with the analysis...";
        }

        function generateMockToolName(stepNumber) {
            const tools = ['list_services', 'get_service_definition', 'query_splunk', 'get_gus_investigations_by_product_tags', 'pagerduty_get_teams'];
            return tools[stepNumber % tools.length];
        }

        function generateMockToolResult(agentType, stepNumber) {
            return `Mock result for ${agentType} step ${stepNumber} - this would contain actual API response data`;
        }

        function generateMockToolCall(stepNumber) {
            return `Mock tool call ${stepNumber} - this would show the actual function call made`;
        }

        function generateMockServerName(toolName) {
            const serverMap = {
                'list_services': 'salesforce-falcon-metadata',
                'get_service_definition': 'salesforce-falcon-metadata',
                'query_splunk': 'salesforce-splunk',
                'get_gus_investigations_by_product_tags': 'salesforce-gus',
                'pagerduty_get_teams': 'salesforce-pagerduty',
                'query_argus': 'salesforce-argus',
                'fetch_and_analyze_trace': 'salesforce-trace-analyzer'
            };
            return serverMap[toolName] || 'mcp-adaptor';
        }

        function generateMockActionInput(toolName, stepNumber) {
            const inputs = {
                'list_services': {
                    "service_name": "sdb"
                },
                'get_service_definition': {
                    "service_name": `sdb-service-${stepNumber}`
                },
                'query_splunk': {
                    "query": "index=globaldefault service_name=*bot-svc-llm* earliest=-1d@d latest=now",
                    "max_results": 100
                },
                'get_gus_investigations_by_product_tags': {
                    "product_tags": ["bot-svc-llm"],
                    "last_n_days": 10
                },
                'pagerduty_get_teams': {
                    "search_request": "Core Database Performance"
                },
                'query_argus': {
                    "query": "-1h:sfms_system.metrics:cpustats.utilization:avg:1m-avg"
                }
            };
            return inputs[toolName] || { "param": `value_${stepNumber}` };
        }

        function generateMockAnswer(trajectoryId) {
            if (trajectoryId % 3 === 0) {
                return "I'm sorry, but I couldn't find a satisfactory answer within the allowed number of iterations.";
            }
            
            return {
                "status": "success",
                "services_analyzed": Math.floor(Math.random() * 20) + 10,
                "longest_chain_length": Math.floor(Math.random() * 8) + 3,
                "completion_time": `${Math.floor(Math.random() * 300) + 60} seconds`
            };
        }

        function updateQuestionDisplay() {
            const questionSection = document.getElementById('current-question');
            const questionText = document.getElementById('question-text');
            
            // Show the question for the selected trajectory
            const question = getQuestionForTrajectory(parseInt(selectedTrajectoryId));
            questionText.textContent = question;
            questionSection.style.display = 'block';
        }

        function updateComparison() {
            const comparisonArea = document.getElementById('comparison-area');
            
            if (selectedAgents.size === 0) {
                comparisonArea.innerHTML = `
                    <div class="no-selection">
                        <h3>🎯 Select Agent Types to Compare</h3>
                        <p>Choose one or more agent types above to view and compare their trajectories for the selected Salesforce enterprise task.</p>
                        <p style="margin-top: 15px; color: #888;">
                            You can compare up to 3 different agent approaches side by side to analyze their reasoning patterns, 
                            tool usage, and performance differences on complex enterprise scenarios.
                        </p>
                    </div>
                `;
                return;
            }

            const containerClass = selectedAgents.size === 1 ? 'single' : 
                                 selectedAgents.size === 2 ? 'double' : 'triple';
            
            let html = `<div class="comparison-container ${containerClass}">`;
            
            selectedAgents.forEach(agentType => {
                html += createAgentColumn(agentType, selectedTrajectoryId);
            });
            
            html += '</div>';
            comparisonArea.innerHTML = html;
        }

        function createAgentColumn(agentType, trajectoryId) {
            const data = trajectoryData[agentType];
            if (!data) {
                return `
                    <div class="agent-column">
                        <div class="agent-header">
                            <h3>${getAgentDisplayName(agentType)}</h3>
                            <div class="agent-meta">Loading...</div>
                        </div>
                        <div class="trajectory-content">
                            <div class="loading">Loading trajectory data...</div>
                        </div>
                    </div>
                `;
            }

            const trajectory = data.trajectories.find(t => t.trajectory_id == trajectoryId);
            if (!trajectory) {
                return `
                    <div class="agent-column">
                        <div class="agent-header">
                            <h3>${getAgentDisplayName(agentType)}</h3>
                            <div class="agent-meta">Trajectory not found</div>
                        </div>
                        <div class="trajectory-content">
                            <div class="error">Trajectory #${trajectoryId} not found for this agent type.</div>
                        </div>
                    </div>
                `;
            }

            const evalResult = getEvaluationResult(trajectory.trajectory_id, agentType);
            const isSuccessful = evalResult ? evalResult.success : false;
            const statusText = isSuccessful ? 'Successful' : 'Failed';
            const toolCalls = trajectory.steps.filter(s => s.tool_name).length;

            return `
                <div class="agent-column">
                    <div class="agent-header">
                        <h3>${getAgentDisplayName(agentType)}</h3>
                        <div class="agent-meta">
                            ${statusText} • ${toolCalls} tool calls
                        </div>
                    </div>
                    <div class="trajectory-content">
                        ${createTrajectoryStats(trajectory, agentType)}
                        ${createTrajectoryCard(trajectory, agentType)}
                    </div>
                </div>
            `;
        }

        function createTrajectoryStats(trajectory, agentType) {
            const evalResult = getEvaluationResult(trajectory.trajectory_id, agentType);
            const isSuccessful = evalResult ? evalResult.success : false;
            const toolCalls = trajectory.steps.filter(s => s.tool_name).length;
            const reasoningBlocks = trajectory.steps.filter(s => s.llm_response && s.llm_response.trim()).length;
            
            // Get evaluation details
            const evalInfo = evalResult ? `${evalResult.passed_evals}/${evalResult.total_evals}` : 'N/A';

            return `
                <div class="stats-summary">
                    <div class="stat-item">
                        <span class="stat-value">${reasoningBlocks}</span>
                        <span class="stat-label">Reasoning Blocks</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">${toolCalls}</span>
                        <span class="stat-label">Tool Calls</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">${isSuccessful ? 'Pass' : 'Fail'}</span>
                        <span class="stat-label">Evaluation</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">${evalInfo}</span>
                        <span class="stat-label">Evals Passed</span>
                    </div>
                </div>
            `;
        }
        
        function getEvaluationResult(trajectoryId, agentType) {
            if (!evaluationResults || !evaluationResults[agentType]) {
                return null;
            }
            return evaluationResults[agentType][trajectoryId] || null;
        }

        function createTrajectoryCard(trajectory, agentType) {
            const evalResult = getEvaluationResult(trajectory.trajectory_id, agentType);
            const failureReasonsSection = createFailureReasonsSection(evalResult);
            
            return `
                <div class="trajectory-card expanded" data-id="${trajectory.trajectory_id}-${agentType}">
                    <div class="trajectory-header">
                        <div>
                            <div class="trajectory-title">Trajectory #${trajectory.trajectory_id}</div>
                            <div class="trajectory-meta-info">
                                <span>🔗 ${trajectory.trace_id.substring(0, 8)}...</span>
                            </div>
                        </div>
                    </div>
                    <div class="trajectory-details">
                        <div class="execution-flow">
                            ${createExecutionFlow(trajectory.steps)}
                        </div>
                        
                        ${trajectory.answer ? createAnswerSection(trajectory.answer) : ''}
                        
                        ${failureReasonsSection}
                    </div>
                </div>
            `;
        }
        
        function createFailureReasonsSection(evalResult) {
            if (!evalResult || evalResult.success || !evalResult.failed_reasons || evalResult.failed_reasons.length === 0) {
                return '';
            }
            
            return `
                <div class="failure-reasons-section">
                    <h4>Evaluation Failures</h4>
                    <div class="failure-reasons-list">
                        ${evalResult.failed_reasons.map(reason => `
                            <div class="failure-reason-item">
                                ${reason}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function createExecutionFlow(steps) {
            let flowHtml = '';
            
            for (const step of steps) {
                // Add reasoning if present
                if (step.llm_response && step.llm_response.trim()) {
                    flowHtml += `
                        <div class="reasoning-block">
                            <div class="block-content">${step.llm_response}</div>
                        </div>
                    `;
                }
                
                // Add tool call if present
                if (step.tool_name) {
                    flowHtml += `
                        <div class="tool-call-box">
                            <div class="tool-name">${step.tool_name}${step.server_name ? ` (${step.server_name})` : ''}</div>
                            ${step.action_input ? `<div class="tool-arguments">${formatToolArguments(step.action_input)}</div>` : ''}
                        </div>
                    `;
                }
                
                // Add tool result if present
                if (step.tool_result) {
                    flowHtml += `
                        <div class="tool-result-box">
                            <div class="tool-result-content">${step.tool_result}</div>
                        </div>
                    `;
                }
            }
            
            return flowHtml;
        }

        function createAnswerSection(answer) {
            const answerText = typeof answer === 'string' ? answer : JSON.stringify(answer, null, 2);
            
            return `
                <div class="answer-section">
                    <h4>✨ Final Answer</h4>
                    <div class="answer-content">${answerText}</div>
                </div>
            `;
        }

        function formatToolArguments(actionInput) {
            if (!actionInput) return 'No arguments';
            
            if (typeof actionInput === 'string') {
                return actionInput;
            }
            
            if (typeof actionInput === 'object') {
                try {
                    // Format as pretty JSON with proper indentation
                    return JSON.stringify(actionInput, null, 2);
                } catch (e) {
                    return String(actionInput);
                }
            }
            
            return String(actionInput);
        }

        function getAgentDisplayName(agentType) {
            const names = {
                'react-transform': 'ReAct + Tool Transform',
                'react-no-transform': 'ReAct Agent',
                'cursor-agent': 'Cursor Agent'
            };
            return names[agentType] || agentType;
        }

        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength) + '... <em>(truncated)</em>';
        }

        // Trajectory toggle functions removed since trajectories are always expanded

        // Agent visualization functionality
        function toggleAgentVisualization(card) {
            const visualization = card.querySelector('.agent-visualization');
            const isExpanded = card.classList.contains('expanded');
            
            if (isExpanded) {
                // Collapse
                visualization.style.display = 'none';
                card.classList.remove('expanded');
            } else {
                // Expand
                visualization.style.display = 'block';
                card.classList.add('expanded');
                
                // Initialize Mermaid diagram if not already done
                if (!card.dataset.diagramInitialized) {
                    initializeReactTransformDiagram();
                    card.dataset.diagramInitialized = 'true';
                }
            }
        }

        function initializeReactTransformDiagram() {
            // Initialize Mermaid
            mermaid.initialize({
                startOnLoad: false,
                theme: 'default',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true,
                    curve: 'basis'
                }
            });

            // Define the diagram
            const diagramDefinition = `
                flowchart TD
                    A1[Tool Execution Complete] --> B1{Need Transform?}
                    B1 -->|No| C1[❌ Skip Transform<br/>Use Raw Output]
                    B1 -->|Yes| D1[🔧 INTELLIGENT TRANSFORM<br/>Analyze + Generate + Execute Code]
                    
                    D1 --> E1{Success?}
                    E1 -->|Yes| F1[✅ Use Transformed Data]
                    E1 -->|No| G1[🔄 RETRY & SELF-REFINE<br/>Up to 3 attempts with error feedback]
                    
                    G1 --> H1{More Attempts?}
                    H1 -->|Yes| D1
                    H1 -->|No| I1[❌ Fallback to Original]
                    
                    F1 --> J1[Continue Agent Loop]
                    C1 --> J1
                    I1 --> J1
                    
                    style D1 fill:#ffeb3b,stroke:#f57f17,stroke-width:4px
                    style G1 fill:#ff5722,stroke:#bf360c,stroke-width:4px
                    style H1 fill:#2196f3,stroke:#0d47a1,stroke-width:3px
                    style B1 fill:#e1f5fe,stroke:#01579b,stroke-width:2px
                    style E1 fill:#e1f5fe,stroke:#01579b,stroke-width:2px
                    style F1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px
                    style C1 fill:#ffcdd2,stroke:#c62828,stroke-width:2px
                    style I1 fill:#ffcdd2,stroke:#c62828,stroke-width:2px
            `;

            // Render the diagram
            mermaid.render('react-transform-mermaid', diagramDefinition).then(function(result) {
                document.getElementById('react-transform-diagram').innerHTML = result.svg;
            }).catch(function(error) {
                console.error('Error rendering diagram:', error);
                document.getElementById('react-transform-diagram').innerHTML = '<p>Error loading diagram</p>';
            });
        }
    </script>
</body>
</html>